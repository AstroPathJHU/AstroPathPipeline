# 5. HPF Processing (HPFs)
## 5.1. Description
This section of the documentation and code picks up after the slides have been added to the *Specimen_Table_N.xlsx*, a description of that file is located [here](../scans/docs/scanning/SpecimenTable.md). After the ```transferdeamon``` module, all code assumes slides and file structure format in [4.6.](../scans/docs/DirectoryOrganization.md) have been adhered to, namely that the ```<ScanNN>``` subfolder is now in an additional *im3* subfolder under each ```<SlideID>```. Additional definitions on naming should be reviewed before continuing, found [here](../scans/docs/Definitions).

In this section the ```<Dpath>\<Dname>``` processing folders are intialized, a slide list is created, and slides are assigned new ```SlideID```s [5.5.](AstroidGen#55-astroid-generation "Title"). Next images are renamed, transferred and backed up ([5.6.](TransferDaemon#56-transfer-daemon "Title")). Images are then corrected for imaging warping and flatfield effects ([5.7.](Flatfield#58-flatfield "Title")). After this, cells are segmented and classified in each image using the multipass phenotype method in inForm. Each of these steps are run by custom code that process on perpetual loops with limited user interaction. An important step of this process is the quality control images generated on the cell classification output, described **[here]**. After, images from all slides in a cohort pass the cell classification quality controll, cell segmenation maps are rebuilt to remove cells not defined by the final merged cell segmentation[**described here**]. Finally, slide macro regional annotations are applied to the images using the HALO software and distributed to the slides using a batch script[**]. 

A final checklist of things to verify and complete before loading into the database is added **here**. In this section there is also a ```cleanup``` module which checks for any missing files as well as additional upkeep instructions.

## 5.2. Contents
- [5.1. Description](#51-description "Title")
- [5.2. Contents](#54-contents "Title")
- [5.3. Instructions](docs/Instructions.md)
- [5.4. Workflow Overview](docs/WorkflowOverview)
- [5.5. AstroIDGen](AstroidGen#55-astroid-generation "Title")
  - [5.5.1. Description](AstroidGen#551-description "Title")
  - [5.5.2. Important Definitions](AstroidGen#552-important-definitions "Title")
  - [5.5.3. Workflow](AstroidGen#553-workflow "Title")
- [5.6. Transfer Daemon](TransferDaemon#56-transfer-daemon "Title")
  - [5.6.1. Description](TransferDaemon#561-description "Title")
  - [5.6.2. Important Definitions](TransferDaemon#562-important-definitions "Title")
  - [5.6.3. Instructions](TransferDaemon#563-instructions "Title")
  - [5.6.4. Workflow](TransferDaemon#564-workflow "Title")
    - [5.6.4.1. Initial Transfer](TransferDaemon#5641-initial-transfer "Title")
    - [5.6.4.2. MD5 Check](TransferDaemon#5642-md5-check "Title")
    - [5.6.4.3. Compression Into Backup](TransferDaemon#5643-compression-into-backup "Title")
    - [5.6.4.4. Source File Handling](TransferDaemon#5644-source-file-handling "Title")
  - [5.6.5. Notes](TransferDaemon#565-notes "Title") 
- [5.7. Meanimages](meanimages#57-meanimages "Title")
  - [5.7.1. Description](meanimages#571-description "Title")
  - [5.7.2. Important Definitions](meanimages#572-important-definitions "Title")
  - [5.7.3. Instructions](meanimages#573-instructions "Title")
  - [5.7.4. Workflow](meanimages#574-workflow "Title")
    - [5.7.4.1. Checking for Tasks](meanimages#5741-checking-for-tasks "Title")
	- [5.7.4.2. Shred Im3s](meanimages#5742-shred-im3s "Title")
	- [5.7.4.3. raw2mean](meanimages#5743-raw2mean "Title")
- [5.8. Flatfield](Flatfield#58-flatfield "Title")
  - [5.8.1. Description](Flatfield#581-description "Title")
  - [5.8.2. Important Definitions](Flatfield#582-important-definitions "Title")
    - [5.8.2.1. Flatw Expected Directory Structure](Flatfield#5821-flatw-expected-directory-structure "Title")
	- [5.8.2.2. Output Formatting](Flatfield#5822-output-formatting "Title")
  - [5.8.3. Instructions](Flatfield#583-instructions "Title")
    - [5.8.3.1. flatw_queue](Flatfield#5831-flatw_queue "Title")
	- [5.8.3.2. flatw_worker](Flatfield#5832-flatw_worker "Title")
	- [5.8.3.3. Im3tools](Flatfield#5833-im3tools "Title")
  - [5.8.4. Overview Workflow of Im3Tools](Flatfield#584-overview-workflow-of-im3tools "Title")
- [5.9. Mergeloop](mergeloop#59-mergeloop "Title")
- [5.10. Inform_processing](inform_processing#510-inform_processing "Title")
- [5.11. Segmaps](segmaps#511-segmaps "Title")
- [5.12. Transferanno](transferanno#512-transferanno "Title")
